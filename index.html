<!DOCTYPE html>
<html>
    <head>
        <title>
            New Yorker Music Scraper
        </title>
        <link rel="stylesheet" href="style.css">
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@300;400;700&display=swap');
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <h1>The New Yorker Music Scraper &#127925;</h1>
        <p>A python script that scrapes the New Yorker's Jazz, Rock, and Pop music recommendations.</p>
        <div class="container" id="cont">
            <script>
        $.getJSON( "./records.json", function( albums ) {
            let i = 0
                Object.keys(albums).forEach(key => {
                    var node = document.getElementById('cont');
                    var newNode = document.createElement('span');
                    newNode.className = 'card';
                    newNode.id = i;
                    node.appendChild(newNode);
                    i++;
                    
                })

                i = Object.keys(albums).length-1;

                Object.keys(albums).forEach(key => {
                    var node = document.getElementById(i);
                    var newNode = document.createElement('iframe');
                    newNode.src = 'https://open.spotify.com/embed/album/' + albums[key][0]['id']
                    newNode.width = 300;
                    newNode.height = 380;
                    newNode.frameBorder = 0;
                    newNode.allowtransparency = true;
                    newNode.allow = 'encrypted-media'
                    node.appendChild(newNode);
                    i--;
                    
                });
            });
            </script>      
        </div>
    </body>
</html>